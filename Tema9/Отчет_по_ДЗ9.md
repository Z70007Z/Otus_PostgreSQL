
# Практика №6 "Блокировки."
# 1. Создать инстанс ВМ с 2 ядрами и 4 Гб ОЗУ и HDD 20GB.

Была создана виртуальная машина:

1. ОС - Ubuntu 24.04 LTS
2. Выделено минимально количество ресурсов
    - CPU 2 
    - RAM 4 ГБ
    - Диск HDD 20 Гб
    - Прерываемая - Да

3. В Дефолтной сети создал подсетку:
    - Имя: otus-vm-db-pg-net-1
    - ip адресация: 10.10.8.0/24
    - Динамический публичный IP адрес

4. Имя VM - otus-db-pg-vm-9

5. Для подключения по SSH воспользовался ранее сгенерированным ключом, во время создания VM указал публичный ключ.

Для подключения использовал  ПО PuTTy, можно так же Powershell и другое ПО.

#

# 2. Установить на него PostgreSQL 15 с дефолтными настройками.
```bash

# https://www.ubuntumint.com/install-postgresql-in-ubuntu/

sudo apt update && sudo apt upgrade -y
# Сначала нужно импортировать ключ PostgreSQL GPG для проверки подлинности установочного пакета:
curl -fSsL https://www.postgresql.org/media/keys/ACCC4CF8.asc | gpg --dearmor | sudo tee /usr/share/keyrings/postgresql.gpg > /dev/null
# Импортируем стабильный репозиторий PostgreSQL 15, который, как следует из названия, содержит последнюю безопасную, рабочую и стабильную версию
echo deb [arch=amd64,arm64,ppc64el signed-by=/usr/share/keyrings/postgresql.gpg] http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -cs)-pgdg main | sudo tee /etc/apt/sources.list.d/postgresql.list
# Теперь нужжно обновить список источников репозитория, чтобы он отражал новые дополнения. Для этого выполним следующую команду:
sudo apt update -y
# Установка PostgreSQL с помощью следующей команды
sudo apt install postgresql-client-15 postgresql-15 -y

# Следующая команда выведет список всех пакетов, связанных с вашей установкой PostgreSQL
dpkg -l | grep postgresql
# Приведенная выше команда выводит список всех системных процессов, использующих/прослушивающих порт 5432
sudo ss -atnp | grep 5432
# Затем перезапустите PostgreSQL, чтобы он продолжал работать даже после перезагрузки системы Ubuntu, и проверьте статус PostgreSQL, чтобы убедиться, что он работает
sudo systemctl restart postgresql
sudo systemctl enable postgresql
sudo systemctl status postgresql

# Проверяем какой кластер запущен
pg_lsclusters
# или
sudo -u postgres pg_lsclusters

Ver Cluster Port Status Owner    Data directory              Log file
15  main    5432 online postgres /var/lib/postgresql/15/main /var/log/postgresql/postgresql-15-main.log

# Картинка с выполненными командами ранее о статусе кластера (Картинка ниже!):
```
![Статус кластера](https://github.com/Z70007Z/Otus_PostgreSQL/blob/main/Tema8/picture/status_cluster.jpg "Статус кластера")

#

# 3. Реализовать прямое соединение двух или более таблиц.
```bash

# Я не программист, а админ, но чтож учимся! )
# Создание базы 
CREATE DATABASE student_tema8;

# Перезодим в базу
\c student_tema8

# Настраиваем специальное отображение значений NULL, чтобы было не пустое место!
\pset null [NULL]

# Потытался придумать свой прмимер!!!
# Создание таблицы1:
CREATE TABLE userAD (
    userAD_id serial,
    first_name  varchar,
    second_name varchar
);

# Создание таблицы2:
CREATE TABLE folder (
    folder_id   serial,
    name_folder   varchar,
    size_GB int
);

# Создание таблицы3:
CREATE TABLE group_ad (
    group_ad_id  serial,
    name_group varchar,
    userAD_id    int,
    folder_id int
);

# Наполняем таблицы:
INSERT INTO userAD
       (userAD_id, first_name,second_name)
VALUES (1, 'Иван', 'Иванов'),
       (2, 'Петр', 'Петров'),
       (3, 'Савелий', 'Сидоров'),
       (4, 'Антон', 'Шторкин'),
       (5, 'Олег', 'Зажигаев'),
       (6, 'Аркадий', 'Паровозов');

INSERT INTO folder
       (folder_id, name_folder, size_GB)
VALUES (1, 'Фото', 10),
       (2, 'Видео', 25),
       (3, 'Документы', 20),
       (4, 'Отчеты отдела', 7),
       (5, 'Проекты', 15);

INSERT INTO group_ad
       (group_ad_id, name_group,  userAD_id, folder_id)
VALUES (1, 'Группа чтение', 1, 2),
       (2, 'Группа запись', 4, 1),
       (3, 'Группа просмотр', 2, 5),
       (4, 'Группа vip', 3, 1),
       (5, 'Группа админ', null, null);


# Смотрим содержимое таблиц:
student_tema8=# SELECT * FROM userAD;
    userad_id | first_name | second_name 
    -----------+------------+-------------
            1 | Иван       | Иванов
            2 | Петр       | Петров
            3 | Савелий    | Сидоров
            4 | Антон      | Шторкин
            5 | Олег       | Зажигаев
            6 | Аркадий    | Паровозов
    (6 rows)

student_tema8=# SELECT * FROM folder;
    folder_id |  name_folder  | size_gb 
    -----------+---------------+---------
            1 | Фото          |      10
            2 | Видео         |      25
            3 | Документы     |      20
            4 | Отчеты отдела |       7
            5 | Проекты       |      15
    (5 rows)

student_tema8=# SELECT * FROM group_ad;
     group_ad_id |   name_group    | userad_id | folder_id 
    -------------+-----------------+-----------+-----------
               1 | Группа чтение   |         1 |         2 
               2 | Группа запись   |         4 |         1 
               3 | Группа просмотр |         2 |         5 
               4 | Группа vip      |         3 |         1 
               5 | Группа админ    |    [NULL] |    [NULL] 
    (5 rows)

# Реализую соединение таблиц:
student_tema8=# SELECT * FROM group_ad g
    JOIN userAD u ON g.userad_id = u.userad_id
    JOIN folder f on g.folder_id = f.folder_id;

    group_ad_id |   name_group    | userad_id | folder_id | userad_id | first_name | second_name | folder_id | name_folder | size_gb 
   -------------+-----------------+-----------+-----------+-----------+------------+-------------+-----------+-------------+---------
              4 | Группа vip      |         3 |         1 |         3 | Савелий    | Сидоров     |         1 | Фото        |      10
              2 | Группа запись   |         4 |         1 |         4 | Антон      | Шторкин     |         1 | Фото        |      10
              1 | Группа чтение   |         1 |         2 |         1 | Иван       | Иванов      |         2 | Видео       |      25
              3 | Группа просмотр |         2 |         5 |         2 | Петр       | Петров      |         5 | Проекты     |      15
    (4 rows)
# вышло иного лишнего (в плане id).

# Луше так, но если именование id в разных таблицах совпадает:
student_tema8=# 
SELECT * FROM group_ad g
    JOIN userAD u USING (userad_id)
    NATURAL JOIN folder f;

     folder_id | userad_id | group_ad_id |   name_group    | first_name | second_name | name_folder | size_gb 
    -----------+-----------+-------------+-----------------+------------+-------------+-------------+---------
             1 |         3 |           4 | Группа vip      | Савелий    | Сидоров     | Фото        |      10
             1 |         4 |           2 | Группа запись   | Антон      | Шторкин     | Фото        |      10
             2 |         1 |           1 | Группа чтение   | Иван       | Иванов      | Видео       |      25
             5 |         2 |           3 | Группа просмотр | Петр       | Петров      | Проекты     |      15
    (4 rows)

# Заключение: Как бы берется за основу таблица group_ad и в нее используя идентификаторы подтягиваются данные
# из таблиц userAD и folder.

```
# 4. Реализовать левостороннее (или правостороннее) соединение двух или более таблиц.
```bash

# Для работы будем использовать эти же таблицы.
SELECT * FROM group_ad g
    LEFT JOIN userAD u
    ON g.userad_id = u.userad_id;

 group_ad_id |   name_group    | userad_id | folder_id | userad_id | first_name | second_name 
-------------+-----------------+-----------+-----------+-----------+------------+-------------
           1 | Группа чтение   |         1 |         2 |         1 | Иван       | Иванов      
           3 | Группа просмотр |         2 |         5 |         2 | Петр       | Петров      
           4 | Группа vip      |         3 |         1 |         3 | Савелий    | Сидоров
           2 | Группа запись   |         4 |         1 |         4 | Антон      | Шторкин
           5 | Группа админ    |    [NULL] |    [NULL] |    [NULL] | [NULL]     | [NULL]
(5 rows)

# Выводим JOIN и отбирает только где есть NULL:
    SELECT * FROM group_ad g
        LEFT JOIN userAD u
        ON g.userad_id = u.userad_id
        WHERE u.userad_id = null;

     group_ad_id | name_group | userad_id | folder_id | userad_id | first_name | second_name 
    -------------+------------+-----------+-----------+-----------+------------+-------------
    (0 rows)
# WHERE u.userad_id = null; такое условие не рабочее, если null то и получается и выводить нечего.

# Выводим JOIN и отбирает только где есть NULL
# Рабочее решение:
    SELECT * FROM group_ad g
        LEFT JOIN userAD u
        ON g.userad_id = u.userad_id
        WHERE u.userad_id IS NULL;

     group_ad_id |  name_group  | userad_id | folder_id | userad_id | first_name | second_name 
    -------------+--------------+-----------+-----------+-----------+------------+-------------
               5 | Группа админ |    [NULL] |    [NULL] |    [NULL] | [NULL]     | [NULL]
    (1 row)

# Для примера заменил внешнюю таблицу.
SELECT * FROM userAD g
    LEFT JOIN group_ad u
    ON g.userad_id = u.userad_id;

 userad_id | first_name | second_name | group_ad_id |   name_group    | userad_id | folder_id 
-----------+------------+-------------+-------------+-----------------+-----------+-----------
         1 | Иван       | Иванов      |           1 | Группа чтение   |         1 |         2
         2 | Петр       | Петров      |           3 | Группа просмотр |         2 |         5
         3 | Савелий    | Сидоров     |           4 | Группа vip      |         3 |         1
         4 | Антон      | Шторкин     |           2 | Группа запись   |         4 |         1
         5 | Олег       | Зажигаев    |      [NULL] | [NULL]          |    [NULL] |    [NULL]
         6 | Аркадий    | Паровозов   |      [NULL] | [NULL]          |    [NULL] |    [NULL]
(6 rows)
# [NULL] там где пользоватеня нет в какой-либо группе.

# Для примера правосторонне соединение таблиц:
SELECT * FROM group_ad g
    RIGHT JOIN userAD u
    ON g.userad_id = u.userad_id;

 group_ad_id |   name_group    | userad_id | folder_id | userad_id | first_name | second_name 
-------------+-----------------+-----------+-----------+-----------+------------+-------------
           1 | Группа чтение   |         1 |         2 |         1 | Иван       | Иванов
           3 | Группа просмотр |         2 |         5 |         2 | Петр       | Петров
           4 | Группа vip      |         3 |         1 |         3 | Савелий    | Сидоров
           2 | Группа запись   |         4 |         1 |         4 | Антон      | Шторкин
      [NULL] | [NULL]          |    [NULL] |    [NULL] |         5 | Олег       | Зажигаев
      [NULL] | [NULL]          |    [NULL] |    [NULL] |         6 | Аркадий    | Паровозов
(6 rows)

```
#
# 5. Реализовать кросс соединение двух или более таблиц.

Для Cross JOIN не нужно условие соединения:
```bash

# CROSS это перемножение всех на всех:
student_tema8=# 
SELECT * FROM group_ad g
    CROSS JOIN userAD u;

 group_ad_id |   name_group    | userad_id | folder_id | userad_id | first_name | second_name 
-------------+-----------------+-----------+-----------+-----------+------------+-------------
           1 | Группа чтение   |         1 |         2 |         1 | Иван       | Иванов
           1 | Группа чтение   |         1 |         2 |         2 | Петр       | Петров
           1 | Группа чтение   |         1 |         2 |         3 | Савелий    | Сидоров
           1 | Группа чтение   |         1 |         2 |         4 | Антон      | Шторкин
           1 | Группа чтение   |         1 |         2 |         5 | Олег       | Зажигаев
           1 | Группа чтение   |         1 |         2 |         6 | Аркадий    | Паровозов
           2 | Группа запись   |         4 |         1 |         1 | Иван       | Иванов
           2 | Группа запись   |         4 |         1 |         2 | Петр       | Петров
           2 | Группа запись   |         4 |         1 |         3 | Савелий    | Сидоров
           2 | Группа запись   |         4 |         1 |         4 | Антон      | Шторкин
           2 | Группа запись   |         4 |         1 |         5 | Олег       | Зажигаев
           2 | Группа запись   |         4 |         1 |         6 | Аркадий    | Паровозов
           3 | Группа просмотр |         2 |         5 |         1 | Иван       | Иванов
           3 | Группа просмотр |         2 |         5 |         2 | Петр       | Петров
           3 | Группа просмотр |         2 |         5 |         3 | Савелий    | Сидоров
           3 | Группа просмотр |         2 |         5 |         4 | Антон      | Шторкин
           3 | Группа просмотр |         2 |         5 |         5 | Олег       | Зажигаев
           3 | Группа просмотр |         2 |         5 |         6 | Аркадий    | Паровозов
           4 | Группа vip      |         3 |         1 |         1 | Иван       | Иванов
           4 | Группа vip      |         3 |         1 |         2 | Петр       | Петров
           4 | Группа vip      |         3 |         1 |         3 | Савелий    | Сидоров
           4 | Группа vip      |         3 |         1 |         4 | Антон      | Шторкин
           4 | Группа vip      |         3 |         1 |         5 | Олег       | Зажигаев
           4 | Группа vip      |         3 |         1 |         6 | Аркадий    | Паровозов
           5 | Группа админ    |    [NULL] |    [NULL] |         1 | Иван       | Иванов
           5 | Группа админ    |    [NULL] |    [NULL] |         2 | Петр       | Петров
           5 | Группа админ    |    [NULL] |    [NULL] |         3 | Савелий    | Сидоров
           5 | Группа админ    |    [NULL] |    [NULL] |         4 | Антон      | Шторкин
           5 | Группа админ    |    [NULL] |    [NULL] |         5 | Олег       | Зажигаев
           5 | Группа админ    |    [NULL] |    [NULL] |         6 | Аркадий    | Паровозов
(30 rows)


# А так можно посмотреть схему выполнение и стоимость.
EXPLAIN ANALYZE
SELECT * FROM group_ad g
    CROSS JOIN userAD u;

# Эквивалент без JOIN:
SELECT * FROM group_ad g, userAD u;

```
#
# 6. Реализовать полное соединение двух или более таблиц.
```bash

# left и right это в одну кучу:
SELECT * FROM group_ad g
    FULL JOIN userAD u
    ON g.userad_id = u.userad_id;

    group_ad_id |   name_group    | userad_id | folder_id | userad_id | first_name | second_name 
        -------------+-----------------+-----------+-----------+-----------+------------+-------------
              1 | Группа чтение   |         1 |         2 |         1 | Иван       | Иванов
              3 | Группа просмотр |         2 |         5 |         2 | Петр       | Петров
              4 | Группа vip      |         3 |         1 |         3 | Савелий    | Сидоров
              2 | Группа запись   |         4 |         1 |         4 | Антон      | Шторкин
              5 | Группа админ    |    [NULL] |    [NULL] |    [NULL] | [NULL]     | [NULL]
         [NULL] | [NULL]          |    [NULL] |    [NULL] |         5 | Олег       | Зажигаев
         [NULL] | [NULL]          |    [NULL] |    [NULL] |         6 | Аркадий    | Паровозов
    (7 rows)

# left и right это в одну кучу, то только где есть нули:
SELECT * FROM group_ad g
    FULL JOIN userAD u
    ON g.userad_id = u.userad_id
    WHERE g.group_ad_id IS NULL OR u.userad_id IS NULL;
     group_ad_id |  name_group  | userad_id | folder_id | userad_id | first_name | second_name 
    -------------+--------------+-----------+-----------+-----------+------------+-------------
               5 | Группа админ |    [NULL] |    [NULL] |    [NULL] | [NULL]     | [NULL]
          [NULL] | [NULL]       |    [NULL] |    [NULL] |         5 | Олег       | Зажигаев
          [NULL] | [NULL]       |    [NULL] |    [NULL] |         6 | Аркадий    | Паровозов
    (3 rows)

```
#
# 7. Реализовать запрос, в котором будут использованы разные типы соединений.
```bash

# Для анализа плана запроса использовать - EXPLAIN.
# Для примера 
# Комбинация INNER и LEFT JOIN:
SELECT * FROM userAD u
    INNER JOIN group_ad g ON u.userad_id = g.userad_id
    LEFT JOIN folder f ON g.folder_id = f.folder_id;
 userad_id | first_name | second_name | group_ad_id |   name_group    | userad_id | folder_id | folder_id | name_folder | size_gb
-----------+------------+-------------+-------------+-----------------+-----------+-----------+-----------+-------------+---------
         3 | Савелий    | Сидоров     |           4 | Группа vip      |         3 |         1 |         1 | Фото        |      10
         4 | Антон      | Шторкин     |           2 | Группа запись   |         4 |         1 |         1 | Фото        |      10
         1 | Иван       | Иванов      |           1 | Группа чтение   |         1 |         2 |         2 | Видео       |      25
         2 | Петр       | Петров      |           3 | Группа просмотр |         2 |         5 |         5 | Проекты     |      15
(4 rows)
# Вышел аналог прямого соединения в данных условиях.

# Комбинация INNER и FULL JOIN:
SELECT * FROM group_ad g
    INNER JOIN folder f ON g.folder_id = f.folder_id
    FULL JOIN userAD u ON u.userad_id = g.userad_id;

 group_ad_id |   name_group    | userad_id | folder_id | folder_id | name_folder | size_gb | userad_id | first_name | second_name 
-------------+-----------------+-----------+-----------+-----------+-------------+---------+-----------+------------+-------------     
           1 | Группа чтение   |         1 |         2 |         2 | Видео       |      25 |         1 | Иван       | Иванов
           3 | Группа просмотр |         2 |         5 |         5 | Проекты     |      15 |         2 | Петр       | Петров
           4 | Группа vip      |         3 |         1 |         1 | Фото        |      10 |         3 | Савелий    | Сидоров
           2 | Группа запись   |         4 |         1 |         1 | Фото        |      10 |         4 | Антон      | Шторкин
      [NULL] | [NULL]          |    [NULL] |    [NULL] |    [NULL] | [NULL]      |  [NULL] |         5 | Олег       | Зажигаев
      [NULL] | [NULL]          |    [NULL] |    [NULL] |    [NULL] | [NULL]      |  [NULL] |         6 | Аркадий    | Паровозов        
(6 rows)
# Почти правостороннее соединение.

# Комбинация FULL и INNER JOIN:
SELECT * FROM group_ad g
    FULL JOIN folder f ON g.folder_id = f.folder_id
    INNER JOIN userAD u ON u.userad_id = g.userad_id;
 group_ad_id |   name_group    | userad_id | folder_id | folder_id | name_folder | size_gb | userad_id | first_name | second_name
-------------+-----------------+-----------+-----------+-----------+-------------+---------+-----------+------------+-------------
           4 | Группа vip      |         3 |         1 |         1 | Фото        |      10 |         3 | Савелий    | Сидоров
           2 | Группа запись   |         4 |         1 |         1 | Фото        |      10 |         4 | Антон      | Шторкин
           1 | Группа чтение   |         1 |         2 |         2 | Видео       |      25 |         1 | Иван       | Иванов
           3 | Группа просмотр |         2 |         5 |         5 | Проекты     |      15 |         2 | Петр       | Петров
(4 rows)
# Вышел аналог - Комбинации INNER и LEFT JOIN:.

# Комбинация FULL и CROSS:
SELECT * FROM group_ad g
    FULL JOIN folder f ON g.folder_id = f.folder_id
    CROSS JOIN userAD u;
group_ad_id |   name_group    | userad_id | folder_id | folder_id |  name_folder  | size_gb | userad_id | first_name | second_name 
-------------+-----------------+-----------+-----------+-----------+---------------+---------+-----------+------------+-------------
           2 | Группа запись   |         4 |         1 |         1 | Фото          |      10 |         1 | Иван       | Иванов
           2 | Группа запись   |         4 |         1 |         1 | Фото          |      10 |         2 | Петр       | Петров
           2 | Группа запись   |         4 |         1 |         1 | Фото          |      10 |         3 | Савелий    | Сидоров
           2 | Группа запись   |         4 |         1 |         1 | Фото          |      10 |         4 | Антон      | Шторкин
           2 | Группа запись   |         4 |         1 |         1 | Фото          |      10 |         5 | Олег       | Зажигаев
           2 | Группа запись   |         4 |         1 |         1 | Фото          |      10 |         6 | Аркадий    | Паровозов
           4 | Группа vip      |         3 |         1 |         1 | Фото          |      10 |         1 | Иван       | Иванов
           4 | Группа vip      |         3 |         1 |         1 | Фото          |      10 |         2 | Петр       | Петров
           4 | Группа vip      |         3 |         1 |         1 | Фото          |      10 |         3 | Савелий    | Сидоров
           4 | Группа vip      |         3 |         1 |         1 | Фото          |      10 |         4 | Антон      | Шторкин
           4 | Группа vip      |         3 |         1 |         1 | Фото          |      10 |         5 | Олег       | Зажигаев
           4 | Группа vip      |         3 |         1 |         1 | Фото          |      10 |         6 | Аркадий    | Паровозов
           1 | Группа чтение   |         1 |         2 |         2 | Видео         |      25 |         1 | Иван       | Иванов
           1 | Группа чтение   |         1 |         2 |         2 | Видео         |      25 |         2 | Петр       | Петров
           1 | Группа чтение   |         1 |         2 |         2 | Видео         |      25 |         3 | Савелий    | Сидоров
           1 | Группа чтение   |         1 |         2 |         2 | Видео         |      25 |         4 | Антон      | Шторкин
           1 | Группа чтение   |         1 |         2 |         2 | Видео         |      25 |         5 | Олег       | Зажигаев
           1 | Группа чтение   |         1 |         2 |         2 | Видео         |      25 |         6 | Аркадий    | Паровозов
      [NULL] | [NULL]          |    [NULL] |    [NULL] |         3 | Документы     |      20 |         1 | Иван       | Иванов
      [NULL] | [NULL]          |    [NULL] |    [NULL] |         3 | Документы     |      20 |         2 | Петр       | Петров
      [NULL] | [NULL]          |    [NULL] |    [NULL] |         3 | Документы     |      20 |         3 | Савелий    | Сидоров
      [NULL] | [NULL]          |    [NULL] |    [NULL] |         3 | Документы     |      20 |         4 | Антон      | Шторкин
      [NULL] | [NULL]          |    [NULL] |    [NULL] |         3 | Документы     |      20 |         5 | Олег       | Зажигаев
      [NULL] | [NULL]          |    [NULL] |    [NULL] |         3 | Документы     |      20 |         6 | Аркадий    | Паровозов
      [NULL] | [NULL]          |    [NULL] |    [NULL] |         4 | Отчеты отдела |       7 |         1 | Иван       | Иванов
      [NULL] | [NULL]          |    [NULL] |    [NULL] |         4 | Отчеты отдела |       7 |         2 | Петр       | Петров
      [NULL] | [NULL]          |    [NULL] |    [NULL] |         4 | Отчеты отдела |       7 |         3 | Савелий    | Сидоров
      [NULL] | [NULL]          |    [NULL] |    [NULL] |         4 | Отчеты отдела |       7 |         4 | Антон      | Шторкин
      [NULL] | [NULL]          |    [NULL] |    [NULL] |         4 | Отчеты отдела |       7 |         5 | Олег       | Зажигаев
      [NULL] | [NULL]          |    [NULL] |    [NULL] |         4 | Отчеты отдела |       7 |         6 | Аркадий    | Паровозов
           3 | Группа просмотр |         2 |         5 |         5 | Проекты       |      15 |         1 | Иван       | Иванов
           3 | Группа просмотр |         2 |         5 |         5 | Проекты       |      15 |         2 | Петр       | Петров
           3 | Группа просмотр |         2 |         5 |         5 | Проекты       |      15 |         3 | Савелий    | Сидоров
           3 | Группа просмотр |         2 |         5 |         5 | Проекты       |      15 |         4 | Антон      | Шторкин
           3 | Группа просмотр |         2 |         5 |         5 | Проекты       |      15 |         5 | Олег       | Зажигаев
           3 | Группа просмотр |         2 |         5 |         5 | Проекты       |      15 |         6 | Аркадий    | Паровозов
           5 | Группа админ    |    [NULL] |    [NULL] |    [NULL] | [NULL]        |  [NULL] |         1 | Иван       | Иванов
           5 | Группа админ    |    [NULL] |    [NULL] |    [NULL] | [NULL]        |  [NULL] |         2 | Петр       | Петров
           5 | Группа админ    |    [NULL] |    [NULL] |    [NULL] | [NULL]        |  [NULL] |         3 | Савелий    | Сидоров
           5 | Группа админ    |    [NULL] |    [NULL] |    [NULL] | [NULL]        |  [NULL] |         4 | Антон      | Шторкин
           5 | Группа админ    |    [NULL] |    [NULL] |    [NULL] | [NULL]        |  [NULL] |         5 | Олег       | Зажигаев
           5 | Группа админ    |    [NULL] |    [NULL] |    [NULL] | [NULL]        |  [NULL] |         6 | Аркадий    | Паровозов
(42 rows)

```
Вывод: Можно разными соединениями прийти к нужному результату. 
Но нужно смотреть какой ценой, и именно смотреть на план запроса и стоимость его выполнения.
#
# 8. Придумайте 3 своих метрики на основе показанных представлений.

Как-то не очень понял что требуется, т.к. 
не нашел в прошедшей лекции намека на данное задание.

Но предположу что подход несколько творческий.
Метрика как некий параметр производительности системы. 
Берем самые жирные запросы и создаем представления:

```postgresql
CREATE VIEW view_metric_1 AS
SELECT * FROM group_ad g
    JOIN userAD u USING (userad_id)
    NATURAL JOIN folder f;

CREATE VIEW view_metric_2 AS
SELECT * FROM group_ad g
    FULL JOIN userAD u
    USING (userad_id);

CREATE VIEW view_metric_3 AS
SELECT * FROM group_ad g
    FULL JOIN folder f
    USING (folder_id);

EXPLAIN ANALYZE SELECT * FROM view_metric_1;
EXPLAIN ANALYZE SELECT * FROM view_metric_2;
EXPLAIN ANALYZE SELECT * FROM view_metric_3;
```

И если создать bash скрипт в один клик можно проверять как справляет система с нагрузкой.
На вход скрипта подавать разное количеств полей от 0 до бесконечности условно конечно. 
А лучше от планируемо нагрузки на систему.
И смотреть стоимость при выполнении плана запроса.!!!


Ниже запросы вызвали боль и страдание (, аля - ERROR:  column "userad_id" specified more than once.
Особенно комбинированные, уже максимально убрал в явном виде повторение.

```postgresql
CREATE VIEW view_metric AS SELECT * FROM group_ad g
    FULL JOIN folder f USING (folder_id)
    CROSS JOIN userAD u;

CREATE VIEW view_metric AS
SELECT * FROM group_ad g
    FULL JOIN folder f USING (folder_id)
    , userAD u;
```
 
#
### Прошу прокомментировать задание со звездочкой, если не прав прошу приложить ссылки на материалы, где есть правильное решение! ###
